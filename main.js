(()=>{"use strict";async function e(e){const n=await fetch(`https://api.weatherapi.com/v1/current.json?key=ff67773d96384e45a29113456242210&q=${e}`);return await n.json()}function n(e){return`\n        <div class = "form">\n        <h2>${e.location.name}, ${e.location.country}</h2>\n        <span><img src="${e.current.condition.icon}" align="center"></img></span>\n        <span>Температура: ${e.current.temp_c}°C, ветер: ${e.current.wind_mph} м/c </span>\n        <p align="center"><img src="https://static-maps.yandex.ru/v1?ll=${e.location.lon},${e.location.lat}&size=300,300&spn=0.026457,0.0619&apikey=25b219d8-43b5-4d03-94c4-6dff815d896a"</p>\n        </div>`}!async function(t){const a=document.createElement("header");a.innerHTML="<h2>Прогноз погоды</h2>",a.classList.add("header"),t.append(a);const c=document.createElement("weatherShowContainer");c.classList.add("card"),t.append(c);const i=await async function(){const e=await fetch("https://get.geojs.io/v1/ip/geo.json"),n=(await e.json()).city;return console.log("город",n),n}();let o=await e(i);c.innerHTML=`${n(o)}`;const s=document.createElement("input");s.placeholder="Введите город",t.append(s),s.classList.add("search-field");const r=document.createElement("button");r.innerHTML="Посмотрим, что с погодой",t.append(r),r.classList.add("button");const d=document.createElement("containerFoundedCities");t.append(d),d.classList.add("styled-list"),r.addEventListener("click",(async t=>{t.preventDefault(),d.innerHTML="<h2>Ранее вы искали</h2>";const a=s.value.trim();a&&(o=await e(a),c.innerHTML=`${n(o)}`,s.value=""),function(e){const n=JSON.parse(localStorage.getItem("keyWeather"))||[];n.includes(e)||(n.push(e),n.length>10&&n.shift(),localStorage.setItem("keyWeather",JSON.stringify(n)))}(a),(JSON.parse(localStorage.getItem("keyWeather"))||[]).forEach((t=>{const a=document.createElement("div");a.innerHTML=t,a.addEventListener("click",(async a=>{a.preventDefault();const i=await async function(t){const a=await e(t),c=document.createElement("weatherShowContainer"),i=n(a);return c.innerHTML=`${i}`,c.innerHTML}(t);c.innerHTML=`${i}`})),d.appendChild(a)}))}))}(function(){const e=document.createElement("div");return e.id="weatherUI",document.body.append(e),e}())})();